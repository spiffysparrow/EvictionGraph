<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Eviction Graph</title>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="css/master.css" media="screen" title="no title" charset="utf-8">
  </head>
  <body>

    <div id="content">
      <h1>Eviction Notices</h1>
    </div>

  </body>
  <script type="text/javascript">


  var svg = d3.select("#content").append("svg")
      .attr("width", 1000)
      .attr("height", 200)
    .append("g")
      // .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  d3.csv("./Eviction_Notices.csv", function(error, data) {
    if (error) throw error;

    var data=d3.nest()
      .key(function(d) {return d["File Date"].split("/").pop();})
      .sortKeys(d3.ascending)
      .entries(data);

      // debugger

    // data = data.splice(1,6);

    var chart = svg.selectAll("rect")
      .data(data).enter()
      .append("g")
      .attr("class", "bar")
      .attr("width", "100")
      .attr("transform", function(d, i){ return "translate("+ i*50 + ",50)"})

      var rects = chart.append("rect")
        .attr("height", function(d){
          console.log(d.key, d.values.length);
          return d.values.length / 20})
        .attr("width", 20)
        .attr("fill", "green")
        .attr("opacity", 0)

      chart.append("text")
        .text(function(d) {return d.key })
        .attr("transform", "rotate(90)")
        .attr("fill", "white")

        rects.transition()
          .attr("opacity",1)
          .duration(2000)
          .delay(function(d,i){ return i*100})
          .ease("elastic")
      });

  </script>
</html>
